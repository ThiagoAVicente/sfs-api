name: Create Release

on:
  push:
    tags:
      - 'v*'  # Triggers on version tags like v1.0.0, v2.0.0, etc.

jobs:
  release:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # Required to create releases
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0  # Fetch all history for changelog
    
    - name: Create GitHub Release
      uses: softprops/action-gh-release@v1
      with:
        generate_release_notes: true
        name: "Release ${{ github.ref_name }}"
        body: |
          ## ðŸŽ‰ SFS-API ${{ github.ref_name }}
          
          A semantic file search API with multi-collection support and pagination.
          
          ### Installation
          
          ```bash
          git clone https://github.com/${{ github.repository }}.git
          cd sfs-api
          chmod +x install.sh
          ./install.sh  # Auto-configures environment
          ```
          
          See the [README](https://github.com/${{ github.repository }}/blob/main/README.md) for full documentation.
          
          ---
          
          **Full Changelog**: https://github.com/${{ github.repository }}/compare/${{ github.event.before }}...${{ github.ref_name }}
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
